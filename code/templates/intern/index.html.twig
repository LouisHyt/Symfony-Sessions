{% extends 'base.html.twig' %}

{% block stylesheets %}
    <link rel="stylesheet" href={{asset('css/intern.css')}}>
{% endblock %}

{% block javascripts %}
    <script src={{asset('js/internPanel.js')}} defer></script>
{% endblock %}

{% block title %} Interns Panel {% endblock %}
{% block pageTitle %} Interns Panel {% endblock %}
{% block pageDesc %} This is the page where you add, create, delete and list the interns  {% endblock %}

{% block body %}
    <div class="table-container">
        <div class="search-filter-container">
            <div class="search-bar">
                <i class="fa-solid fa-search"></i>
                <input type="text" placeholder="Search interns...">
            </div>
            <div class="filters">
                <button class="filter-btn">
                    <i class="fa-solid fa-filter"></i>
                    Filters
                </button>
                <div class="filter-dropdown">
                    <div class="filter-group">
                        <label for="status-filter">Status</label>
                        <select id="status-filter">
                            <option value="">All</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="city-filter">City</label>
                        <select id="city-filter">
                            <option value="">All</option>
                            <option value="paris">Paris</option>
                            <option value="lyon">Lyon</option>
                            <option value="marseille">Marseille</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <table class="interns-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Genre</th>
                    <th>City</th>
                    <th>Phone</th>
                    <th>Sessions</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
            {% for intern in interns %}
                <tr data-intern-id={{intern.id}}>
                    <td>{{intern.id}}</td>
                    <td>{{intern.fullname}}</td>
                    <td>{{intern.age}}</td>
                    <td>{{intern.genre}}</td>
                    <td>{{intern.city}}</td>
                    <td>{{intern.phone}}</td>
                    <td>{{intern.sessions|length}}</td>
                    <td>
                        {{include('components/status-bubble.html.twig', {sessionStatus: intern.sessionstatus})}}
                    </td>
                    <td class="actions">
                        <button class="open-actions">
                            <i class="fa-solid fa-ellipsis-vertical"></i>
                        </button>
                        <div class="popover">
                            <a class="action-row edit" href={{path('intern_edit', {id: intern.id})}}>
                                <i class="fa-solid fa-pen"></i>
                                <span>Edit</span>
                            </a>
                            <a class="action-row delete" href={{path('intern_delete', {id: intern.id})}}>
                                <i class="fa-solid fa-trash"></i>
                                <span>Delete</span>
                            </a>                            
                        </div>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
